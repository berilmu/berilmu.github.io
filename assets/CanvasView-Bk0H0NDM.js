import{d as J,_ as I,r as k,u as X,o as Y,c as P,a as S,b as i,w as D,v as W,n as q,e as y,f as A}from"./index-D9HsQQqv.js";const F=J("canvas",{state:()=>({canvasDataUrl:null,canvasDataUrl:null,strokeColor:"#0000ff",tempColor:"#0000ff",strokeWidth:3,lastValidColor:"#0000ff",lastPenWidth:3,lastErasWidth:12}),actions:{saveCanvas(d){this.canvasDataUrl=d},clearCanvasData(){this.canvasDataUrl=null},saveSettings({strokeColor:d,tempColor:s,strokeWidth:a,lastValidColor:u,lastPenWidth:c,lastErasWidth:n}){d!=="#0000ff"&&(this.strokeColor=d),s!=="#0000ff"&&(this.tempColor=s),a!==3&&(this.strokeWidth=a),u!=="#0000ff"&&(this.lastValidColor=u),c!==3&&(this.lastPenWidth=c),n!==12&&(this.lastErasWidth=n)},resetSettings(){this.strokeColor="#0000ff",this.tempColor="#0000ff",this.strokeWidth=3,this.lastValidColor="#0000ff",this.lastPenWidth=3,this.lastErasWidth=12}}}),G={class:"canvas-container"},K={class:"tools main-bg-col justify-content-between align-items-center"},O={class:"nav justify-content-center text-white logofont"},Q={__name:"Canvas",setup(d){const s=k(null),a=k("#0000ff");let u="#0000ff";const c=k("#0000ff"),n=k(3);let o=null,m=!1;const f=[];let p=[],h=3,g=12;const x=X(),r=F();function U(){const t=s.value.toDataURL();r.saveCanvas(t),x.go(-1),r.saveSettings({strokeColor:a.value,tempColor:c.value,strokeWidth:n.value,lastValidColor:u,lastPenWidth:h,lastErasWidth:g})}function V(){a.value="#0000ff",u="#0000ff",c.value="#0000ff",n.value=3,h=3,g=12,r.resetSettings()}function b(t){const e=s.value.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}function R(t){t=t.replace("#",""),t.length===3&&(t=t.split("").map(l=>l+l).join(""));const e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}}function E({r:t,g:e,b:l}){const C=[t,e,l].map(v=>(v/=255,v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4)));return .2126*C[0]+.7152*C[1]+.0722*C[2]}function L(){const t=c.value.toLowerCase();console.log("Warna!",t);const e=R(t),l=E(e);console.log(l),l>.95?(console.log("Warna terlalu terang!",t),w(u.toLowerCase())):w(t)}function B(t){const e=t.target.value;a.value!="#ffffff"?(n.value=e,h=n.value):(n.value=e,g=n.value)}function w(t){c.value=t,a.value=t,n.value=h}function T(){a.value.toLowerCase()!=="#ffffff"&&(u=a.value),c.value=a.value,w("#ffffff"),h=n.value,n.value=g}function j(t){m=!0;const e=b(t);o.beginPath(),o.moveTo(e.x,e.y)}function M(t){if(!m)return;const e=b(t);o.strokeStyle=a.value,o.lineWidth=n.value,o.lineTo(e.x,e.y),o.stroke()}function _(){m&&(m=!1,o.closePath(),$())}function $(){const t=o.getImageData(0,0,s.value.width,s.value.height);f.push(t),p=[]}function z(){f.length!==0&&(f.pop(),p.push(o.getImageData(0,0,s.value.width,s.value.height)),f.length>0&&o.putImageData(f[f.length-1],0,0))}function H(){if(p.length===0)return;const t=p.pop();o.putImageData(t,0,0),f.push(t)}function N(){o.clearRect(0,0,s.value.width,s.value.height),f.length=0,p.length=0,r.clearCanvasData()}return Y(()=>{const t=s.value,e=t.parentElement,l=e.clientWidth,C=e.clientHeight*.85;if(t.width=l,t.height=C,o=t.getContext("2d"),o.lineCap="round",o.lineJoin="round",r.canvasDataUrl){const v=new Image;v.onload=()=>{o.drawImage(v,0,0)},v.src=r.canvasDataUrl,a.value=r.strokeColor,c.value=r.tempColor,n.value=r.strokeWidth,u=r.lastValidColor,h=r.lastPenWidth,g=r.lastErasWidth}}),(t,e)=>(S(),P("div",G,[i("div",K,[i("div",O,[D(i("input",{type:"color","onUpdate:modelValue":e[0]||(e[0]=l=>c.value=l),onInput:L},null,544),[[W,c.value]]),i("i",{class:"bi bi-pencil-fill",style:q({color:a.value==="#ffffff"?y(u):a.value}),onClick:e[1]||(e[1]=l=>w(a.value==="#ffffff"?y(u):a.value))},null,4),i("i",{class:"bi bi-eraser-fill",onClick:T}),i("i",{class:"bi bi-trash3-fill",onClick:N}),i("i",{class:"bi bi-arrow-counterclockwise",style:{color:"white"},onClick:z}),i("i",{class:"bi bi-arrow-clockwise",style:{color:"white"},onClick:H}),D(i("input",{type:"range",min:"1",max:"20","onUpdate:modelValue":e[2]||(e[2]=l=>n.value=l),onInput:B},null,544),[[W,n.value]]),i("i",{class:"bi bi-radioactive",onClick:V})]),i("div",{class:"menu"},[i("i",{class:"bi bi-x",onClick:U})])]),i("canvas",{ref_key:"canvasRef",ref:s,onPointerdown:j,onPointermove:M,onPointerup:_,onPointerleave:_,style:{"touch-action":"none",width:"100%",height:"85%",background:"white",border:"1px solid #ccc"}},null,544)]))}},Z=I(Q,[["__scopeId","data-v-6f2eb802"]]),tt={class:"st"},et={__name:"CanvasView",setup(d){return(s,a)=>(S(),P("div",tt,[A(Z)]))}},nt=I(et,[["__scopeId","data-v-8be3285f"]]);export{nt as default};
